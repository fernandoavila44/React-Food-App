(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(e,t,a){e.exports={form:"Checkout_form__3BlzD",control:"Checkout_control__1Iy2v",actions:"Checkout_actions__2IxB3",submit:"Checkout_submit__1K0Go",invalid:"Checkout_invalid__2RiDx",errorText:"Checkout_errorText__1zcSy"}},,function(e,t,a){e.exports={"cart-item":"CartItem_cart-item__ZapQa",summary:"CartItem_summary__1Lbrl",price:"CartItem_price__2UdpI",amount:"CartItem_amount__q1TFi",actions:"CartItem_actions__3Ekq_"}},,,function(e,t,a){e.exports={button:"HeaderCardButton_button__2GuNJ",icon:"HeaderCardButton_icon__16UD_",badge:"HeaderCardButton_badge__2nRPK",bump:"HeaderCardButton_bump__1Nvik"}},function(e,t,a){e.exports={"cart-items":"Cart_cart-items__Ueg7r",total:"Cart_total__1UDV7",actions:"Cart_actions__1O_6g","button--alt":"Cart_button--alt__2OWl8",button:"Cart_button__2qcr-"}},,function(e,t,a){e.exports={meal:"MealsItem_meal__36oRc",description:"MealsItem_description__1ykFG",price:"MealsItem_price__FsomL"}},function(e,t,a){e.exports={backdrop:"Modal_backdrop__sl84E",modal:"Modal_modal__31oD2","slide-down":"Modal_slide-down__2Xl9-"}},function(e,t,a){e.exports={header:"Header_header__24lD6","main-image":"Header_main-image__3AKdB"}},function(e,t,a){e.exports={form:"MealItemForm_form__1bwmr"}},,,function(e,t,a){e.exports=a.p+"static/media/meals.55c74990.jpg"},function(e,t,a){e.exports={meals:"AvailablesMeals_meals__2Nm8X","meals-appear":"AvailablesMeals_meals-appear__2j9zg"}},function(e,t,a){e.exports={input:"Input_input__3gagV"}},function(e,t,a){e.exports={card:"Card_card__q-gUU"}},function(e,t,a){e.exports={summary:"MealsSummary_summary__S_mR_"}},function(e,t,a){e.exports=a(40)},,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),l=a.n(c),o=a(1),u=r.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},clearCart:function(){}}),m=function(){return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor"},r.a.createElement("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"}))},i=a(7),s=a.n(i),d=function(e){var t=Object(n.useContext)(u),a=Object(n.useState)(!1),c=Object(o.a)(a,2),l=c[0],i=c[1],d=t.items,p=d.reduce(function(e,t){return e+t.amount},0),f="".concat(s.a.button," ").concat(l?s.a.bump:"");return Object(n.useEffect)(function(){if(0!==d.length){i(!0);var e=setTimeout(function(){i(!1)},300);return function(){clearTimeout(e)}}},[d]),r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{className:f,onClick:e.isPressed},r.a.createElement("span",{className:s.a.icon},r.a.createElement(m,null)),r.a.createElement("span",null,"Your Cart"),r.a.createElement("span",{className:s.a.badge},p)))},p=a(12),f=a.n(p),E=a(16),_=a.n(E),b=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("header",{className:f.a.header},r.a.createElement("h1",null,"ReactMeals"),r.a.createElement(d,{isPressed:e.isPressed})),r.a.createElement("div",{className:f.a["main-image"]},r.a.createElement("img",{src:_.a,alt:"meals header img"})))},v=a(3),h=a.n(v),C=a(9),g=a(17),x=a.n(g),j=a(10),y=a.n(j),N=a(13),O=a.n(N),I=a(18),k=a.n(I),w=r.a.forwardRef(function(e,t){return r.a.createElement("div",{className:k.a.input},r.a.createElement("label",{htmlFor:e.input.id},e.label),r.a.createElement("input",Object.assign({ref:t},e.input)))}),S=function(e){var t=Object(n.useRef)(),a=Object(n.useState)(!0),c=Object(o.a)(a,2),l=c[0],u=c[1];return r.a.createElement("form",{onSubmit:function(a){a.preventDefault();var n=t.current.value,r=+n;0===n.trim().length||r<1||r>5?u(!1):e.onAddToCart(r)},className:O.a.form,action:""},r.a.createElement(w,{ref:t,label:"Amount",input:{id:"Amount".concat(e.inputId),type:"number",min:"1",max:"5",step:"1",defaultValue:"1"}}),r.a.createElement("button",{className:O.a.button},"+ Add"),!l&&r.a.createElement("p",null,"Please enter a valid amount (1-5)"))},A=function(e){var t="$".concat(e.price.toFixed(2)),a=Object(n.useContext)(u);return r.a.createElement("li",{className:y.a.meal},r.a.createElement("div",null,r.a.createElement("h3",null,e.name),r.a.createElement("div",{className:y.a.description},e.desc),r.a.createElement("div",{className:y.a.price},t)),r.a.createElement("div",null,r.a.createElement(S,{inputId:e.inputId,onAddToCart:function(t){a.addItem({id:e.id,name:e.name,amount:t,price:e.price})}})))},B=a(19),F=a.n(B),D=function(e){return r.a.createElement("div",{className:F.a.card},e.children)},P=function(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(!0),u=Object(o.a)(l,2),m=u[0],i=u[1],s=Object(n.useState)(null),d=Object(o.a)(s,2),p=d[0],f=d[1];Object(n.useEffect)(function(){(function(){var e=Object(C.a)(h.a.mark(function e(){var t,a;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://foodapp-2ff86-default-rtdb.firebaseio.com/meals.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Something went wrong, Error ".concat(t.status));case 5:return e.next=7,t.json();case 7:a=e.sent,c(a),i(!1);case 10:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}})()().catch(function(e){i(!1),f(e.message)})},[]);var E=m?r.a.createElement("p",null,"Fetching data..."):p?r.a.createElement("p",null,p):r.a.createElement("ul",null,a.map(function(e,t){return r.a.createElement(A,{key:t,id:e.id,name:e.name,desc:e.description,price:e.price,inputId:t})}));return r.a.createElement("section",{className:x.a.meals},r.a.createElement(D,null,E))},T=a(20),M=a.n(T),R=function(e){return r.a.createElement("section",{className:M.a.summary},r.a.createElement("h2",null,"Delicious Food, Delivery To You"),r.a.createElement("p",null,"Choose your favorite meal from our brand selection of avilable meats and enjoy deliciuos lunch or dinner at home."),r.a.createElement("p",null,"All our meals are cocked with high-quality ingredientes, just-in-time and of course by experienced chefs! "))},H=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(R,null),r.a.createElement(P,null))},z=a(6),L=a(8),U=a.n(L),q=a(11),J=a.n(q),Y=function(e){return r.a.createElement("div",{onClick:e.onClick,className:J.a.backdrop})},G=function(e){return r.a.createElement("div",{className:J.a.modal},r.a.createElement("div",{className:J.a.content},e.children))},K=function(e){return r.a.createElement(r.a.Fragment,null,l.a.createPortal(r.a.createElement(Y,{onClick:e.setStateBackdrop}),document.getElementById("modal-root")),l.a.createPortal(r.a.createElement(G,null,e.children),document.getElementById("modal-root")))},V=a(4),$=a.n(V),X=function(e){var t="$".concat(e.price.toFixed(2));return r.a.createElement("li",{className:$.a["cart-item"]},r.a.createElement("div",null,r.a.createElement("h2",null,e.name),r.a.createElement("div",{className:$.a.summary},r.a.createElement("span",{className:$.a.price},t),r.a.createElement("span",{className:$.a.amount},"x ",e.amount))),r.a.createElement("div",{className:$.a.actions},r.a.createElement("button",{onClick:e.onRemove},"\u2212"),r.a.createElement("button",{onClick:e.onAdd},"+")))},Q=a(2),W=a.n(Q),Z=function(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),r=a[0],c=a[1],l=Object(n.useState)(!1),u=Object(o.a)(l,2),m=u[0],i=u[1],s=e(r);return{value:r,valid:s,hasError:!s&&m,handleEnteredInput:function(e){c(e.target.value)},handleBlur:function(){i(!0)},resetInput:function(){c(""),i(!1)}}},ee=function(e){var t=Z(function(e){return""!==e.trim()}),a=t.value,n=t.valid,c=t.hasError,l=t.handleEnteredInput,o=t.handleBlur,u=t.resetInput,m=Z(function(e){return""!==e.trim()}),i=m.value,s=m.valid,d=m.hasError,p=m.handleEnteredInput,f=m.handleBlur,E=m.resetInput,_=Z(function(e){return""!==e.trim()}),b=_.value,v=_.valid,h=_.hasError,C=_.handleEnteredInput,g=_.handleBlur,x=_.resetInput,j=Z(function(e){return""!==e.trim()}),y=j.value,N=j.valid,O=j.hasError,I=j.handleEnteredInput,k=j.handleBlur,w=j.resetInput,S=function(e){return"".concat(W.a.control," ").concat(e?W.a.invalid:""," ")},A=!1;n&&s&&v&&N&&(A=!0);var B={name:a,addres:i,postalCode:b,city:y};return r.a.createElement("form",{className:W.a.form,onSubmit:function(t){t.preventDefault(),e.onConfirm(B),u(),E(),x(),w()}},r.a.createElement("div",{className:S(c)},r.a.createElement("label",{htmlFor:"name"},"Your Name"),r.a.createElement("input",{type:"text",id:"name",value:a,onChange:l,onBlur:o}),c&&r.a.createElement("p",{className:W.a.errorText},"Please enter a name")),r.a.createElement("div",{className:S(d)},r.a.createElement("label",{htmlFor:"street"},"Street"),r.a.createElement("input",{type:"text",id:"street",value:i,onChange:p,onBlur:f}),d&&r.a.createElement("p",{className:W.a.errorText},"Please enter a adrees")),r.a.createElement("div",{className:S(h)},r.a.createElement("label",{htmlFor:"postal"},"Postal Code"),r.a.createElement("input",{type:"number",id:"postal",value:b,onChange:C,onBlur:g}),h&&r.a.createElement("p",{className:W.a.errorText},"Please enter a valid postal code")),r.a.createElement("div",{className:S(O)},r.a.createElement("label",{htmlFor:"city"},"City"),r.a.createElement("input",{type:"text",id:"city",value:y,onChange:I,onBlur:k}),O&&r.a.createElement("p",{className:W.a.errorText},"Please enter a city")),r.a.createElement("div",{className:W.a.actions},r.a.createElement("button",{type:"button",onClick:e.onCancel},"Cancel"),r.a.createElement("button",{disabled:!A,className:A?W.a.submit:W.a.invalid},"Confirm")))},te=function(e){var t=Object(n.useState)(!1),a=Object(o.a)(t,2),c=a[0],l=a[1],m=Object(n.useState)(!1),i=Object(o.a)(m,2),s=i[0],d=i[1],p=Object(n.useState)(!1),f=Object(o.a)(p,2),E=f[0],_=f[1],b=Object(n.useContext)(u),v=b.items.length>0,g="$".concat(b.totalAmount.toFixed(2)),x=function(e){b.removeItem(e)},j=function(e){b.addItem(Object(z.a)({},e,{amount:1}))},y=r.a.createElement("ul",{className:U.a["cart-items"]},b.items.map(function(e,t){return r.a.createElement(X,{key:t,name:e.name,amount:e.amount,price:e.price,onRemove:x.bind(null,e.id),onAdd:j.bind(null,e)})})),N=function(){var e=Object(C.a)(h.a.mark(function e(t){var a,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d(!0),e.prev=1,e.next=4,fetch("https://foodapp-2ff86-default-rtdb.firebaseio.com/orders.json",{method:"POST",body:JSON.stringify({user:t,orderedItems:b.items}),headers:{"Content-Type":"application/json"}});case 4:if((a=e.sent).ok){e.next=7;break}throw new Error("Something went wrong, Error ".concat(a.status));case 7:return e.next=9,a.json();case 9:n=e.sent,console.log(n),_(!0),b.clearCart(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),console.log(e.t0.message);case 18:d(!1);case 19:case"end":return e.stop()}},e,null,[[1,15]])}));return function(t){return e.apply(this,arguments)}}(),O=r.a.createElement("div",{className:U.a.actions},r.a.createElement("button",{onClick:e.isShowed,className:["button--alt"]},"Close"),v&&r.a.createElement("button",{onClick:function(){l(function(e){return!e})},className:U.a.button},"Order")),I=r.a.createElement(r.a.Fragment,null,y,r.a.createElement("div",{className:U.a.total},r.a.createElement("span",null,"Total"),r.a.createElement("span",null,g)),c&&r.a.createElement(ee,{onConfirm:N,onCancel:e.isShowed}),!c&&O),k=r.a.createElement("p",null,"Sending order data..."),w=r.a.createElement("p",null,"Your order was succesfully sent!");return r.a.createElement(K,{setStateBackdrop:e.isShowed},!s&&!E&&I,s&&k,!s&&E&&w)},ae=a(14),ne={items:[],totalAmount:0},re=function(e,t){if("ADD"===t.type){var a,n=e.totalAmount+t.item.price*t.item.amount,r=e.items.findIndex(function(e){return e.id===t.item.id}),c=e.items[r];if(c){var l=Object(z.a)({},c,{amount:c.amount+t.item.amount});(a=Object(ae.a)(e.items))[r]=l}else a=e.items.concat(t.item);return{items:a,totalAmount:n}}if("DEL"===t.type){var o,u=e.items.findIndex(function(e){return e.id===t.id}),m=e.items[u],i=e.totalAmount-m.price;if(1===m.amount)o=e.items.filter(function(e){return e.id!==t.id});else{var s=Object(z.a)({},m,{amount:m.amount-1});(o=Object(ae.a)(e.items))[u]=s}return{items:o,totalAmount:i}}return t.type="CLEAR",ne},ce=function(e){var t=Object(n.useReducer)(re,ne),a=Object(o.a)(t,2),c=a[0],l=a[1],m={items:c.items,totalAmount:c.totalAmount,addItem:function(e){l({type:"ADD",item:e})},removeItem:function(e){l({type:"DEL",id:e})},clearCart:function(){l({type:"CLEAR"})}};return r.a.createElement(u.Provider,{value:m},e.children)},le=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1],l=function(){c(function(e){return!e})};return r.a.createElement(ce,null,a&&r.a.createElement(te,{isShowed:l}),r.a.createElement(b,{isPressed:l}),r.a.createElement("main",null,r.a.createElement(H,null)))};l.a.render(r.a.createElement(le,null),document.getElementById("root"))}],[[21,2,1]]]);
//# sourceMappingURL=main.98af03f6.chunk.js.map